<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MNS Terminal — mns.com.ge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #00ff66;
      font-family: "Courier New", monospace;
      height: 100%;
      overflow: hidden;
    }
    #terminal {
      box-sizing: border-box;
      padding: 20px;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      white-space: pre;
    }
    #nav {
      font-weight: bold;
      margin-bottom: 8px;
      letter-spacing: 0.5px;
    }
    #status {
      opacity: 0.7;
      margin-bottom: 20px;
      letter-spacing: 0.5px;
    }
  </style>
</head>
<body>
  <div id="terminal">
    <div id="nav"></div>
    <div id="status"></div>
  </div>

  <script>
    /* =========================
       Phase 12B.1 — Public NAV Stub
       Market Navigation System (MNS)
       Target: mns.com.ge
       Mode: Static, Tier 0, Public-safe
       ========================= */

    "use strict";

    /* ---- TIER 0 STATIC NAV PACKET (IMMUTABLE) ---- */
    const STATIC_NAV_PACKET = Object.freeze({
      regime: "COMPRESSION",
      risk: "NORMAL",
      confidence: "MEDIUM",
      status: "LIVE",
      scope: "PUBLIC"
    });

    /* ---- REGIME CATALOG (IMMUTABLE) ---- */
    const REGIMES = Object.freeze([
      "ACCUMULATION",
      "EXPANSION",
      "DISLOCATION",
      "EXHAUSTION",
      "COMPRESSION"
    ]);

    /* ---- RISK LEVELS (IMMUTABLE) ---- */
    const RISK_LEVELS = Object.freeze([
      "LOW",
      "NORMAL",
      "HIGH"
    ]);

    /* ---- CONFIDENCE LEVELS (IMMUTABLE) ---- */
    const CONFIDENCE_LEVELS = Object.freeze([
      "LOW",
      "MEDIUM",
      "HIGH"
    ]);

    /* ---- DOM REFERENCES ---- */
    const navEl = document.getElementById("nav");
    const statusEl = document.getElementById("status");

    /* ---- ARCHITECTURE: SANITIZE FOR TIER 0 (Deep Clone + Strip) ---- */
    function sanitizeForTier0(state) {
      try {
        // Deep clone to prevent mutation leaks
        const sanitized = {
          regime: state.regime,
          risk: state.risk,
          confidence: state.confidence,
          status: state.status,
          scope: state.scope
        };

        // Validate structure
        if (!REGIMES.includes(sanitized.regime)) {
          throw new Error("Invalid regime");
        }
        if (!RISK_LEVELS.includes(sanitized.risk)) {
          throw new Error("Invalid risk");
        }
        if (!CONFIDENCE_LEVELS.includes(sanitized.confidence)) {
          throw new Error("Invalid confidence");
        }
        if (sanitized.status !== "LIVE" && sanitized.status !== "UNKNOWN") {
          throw new Error("Invalid status");
        }
        if (sanitized.scope !== "PUBLIC" && sanitized.scope !== undefined) {
          throw new Error("Invalid scope");
        }

        return sanitized;

      } catch (err) {
        // Return fail-safe state
        return {
          regime: "UNKNOWN",
          risk: "NORMAL",
          confidence: "LOW",
          status: "UNKNOWN",
          scope: "PUBLIC"
        };
      }
    }

    /* ---- ARCHITECTURE: RENDER NAV (DOM Writes Only) ---- */
    function renderNAV(state) {
      try {
        const safeState = sanitizeForTier0(state);

        const navLine =
          `[NAV] REGIME: ${safeState.regime}` +
          ` | RISK: ${safeState.risk}` +
          ` | CONFIDENCE: ${safeState.confidence}` +
          ` | STATUS: ${safeState.status}` +
          ` | SCOPE: ${safeState.scope}`;

        navEl.textContent = navLine;

      } catch (err) {
        // Fail-safe render
        navEl.textContent = "[NAV] STATE: UNKNOWN";
      }
    }

    /* ---- ARCHITECTURE: RENDER STATUS (DOM Writes Only) ---- */
    function renderStatus() {
      try {
        const statusLine =
          `[STATUS] SYSTEM: STABLE` +
          ` | MODE: TIER_0` +
          ` | STREAM: STATIC`;

        statusEl.textContent = statusLine;

      } catch (err) {
        // Fail-safe render
        statusEl.textContent = "[STATUS] SYSTEM: SAFE_MODE | MODE: TIER_0";
      }
    }

    /* ---- FAIL-SAFE HANDLER ---- */
    function triggerFailSafe() {
      try {
        // Clear all output
        navEl.textContent = "";
        statusEl.textContent = "";

        // Render fail-safe state
        navEl.textContent = "[NAV] STATE: UNKNOWN";
        statusEl.textContent = "[STATUS] SYSTEM: SAFE_MODE | MODE: TIER_0";

      } catch (err) {
        // Ultimate fail-safe: blank screen
        document.getElementById("terminal").innerHTML = "";
      }
    }

    /* ---- BOOT SEQUENCE (Static Render Only) ---- */
    (function init() {
      try {
        // Render static NAV packet through normal pipeline
        renderNAV(STATIC_NAV_PACKET);
        renderStatus();

      } catch (err) {
        triggerFailSafe();
      }
    })();

  </script>
</body>
</html>
